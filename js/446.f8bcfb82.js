"use strict";(self["webpackChunkdoublebrunch"]=self["webpackChunkdoublebrunch"]||[]).push([[446],{5679:function(e,r,t){function s(e){return{all:e=e||new Map,on:function(r,t){var s=e.get(r);s?s.push(t):e.set(r,[t])},off:function(r,t){var s=e.get(r);s&&(t?s.splice(s.indexOf(t)>>>0,1):e.set(r,[]))},emit:function(r,t){var s=e.get(r);s&&s.slice().map((function(e){e(t)})),(s=e.get("*"))&&s.slice().map((function(e){e(r,t)}))}}}t.d(r,{Z:function(){return l}});const a=s();var l=a},9027:function(e,r,t){t.d(r,{Z:function(){return C}});var s=t(6252),a=t(3577),l=t(4768);const i={class:"border-primary border-b-2 p-[15px] md:p-5"},o={class:"flex justify-evenly items-center md:justify-center"},c=(0,s._)("span",{class:"block text-12px"},"Step.1",-1),n=(0,s._)("span",{class:"block text-14px md:text-16px"},"購物車",-1),p=[c,n],m=(0,s._)("span",{class:"block text-12px"},"Step.2",-1),d=(0,s._)("span",{class:"block text-14px md:text-16px"},"訂單資訊",-1),u=[m,d],x=(0,s._)("span",{class:"block text-12px"},"Step.3",-1),g=(0,s._)("span",{class:"block text-14px md:text-16px"},"確認訂單",-1),y=[x,g],f=(0,s._)("span",{class:"block text-12px"},"Step.4",-1),b=(0,s._)("span",{class:"block text-14px md:text-16px"},"完成訂單",-1),_=[f,b];function h(e,r,t,c,n,m){return(0,s.wg)(),(0,s.iD)("section",null,[(0,s._)("div",i,[(0,s._)("ul",o,[(0,s._)("li",null,[(0,s._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":t.step>="1"}])},p,2)]),(0,s._)("li",null,[(0,s._)("img",{src:l,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":t.step>="2"}])},null,2)]),(0,s._)("li",null,[(0,s._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":t.step>="2"}])},u,2)]),(0,s._)("li",null,[(0,s._)("img",{src:l,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":t.step>="3"}])},null,2)]),(0,s._)("li",null,[(0,s._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":t.step>="3"}])},y,2)]),(0,s._)("li",null,[(0,s._)("img",{src:l,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":"4"===t.step}])},null,2)]),(0,s._)("li",null,[(0,s._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":"4"===t.step}])},_,2)])])])])}var w={props:{step:{type:String,default:""}}},v=t(3744);const k=(0,v.Z)(w,[["render",h]]);var C=k},1446:function(e,r,t){t.r(r),t.d(r,{default:function(){return Ce}});var s=t(6252),a=t(3577),l=t(9963),i=t(9450),o=t(7188),c=t(3395);const n={class:"checkout"},p=(0,s._)("h2",{class:"text-20px text-white bg-primary p-[15px] md:p-5"},"填寫資訊",-1),m={class:"grid grid-cols-2 gap-5 pt-[15px] px-[15px] pb-[30px] md:pt-5 md:px-5 md:pb-10"},d={class:"col-span-2 md:col-span-1"},u=(0,s._)("label",{for:"name",class:"block text-primary w-full mb-1"},"姓名",-1),x={class:"relative"},g={key:0,class:"absolute top-1/2 right-5 -translate-y-1/2"},y=(0,s._)("img",{src:i,alt:"icon-checked",class:"bg-warning rounded-full"},null,-1),f=[y],b={key:1,class:"absolute top-1/2 right-5 -translate-y-1/2"},_=(0,s._)("img",{src:o,alt:"icon-checked",class:"bg-primary rounded-full"},null,-1),h=[_],w={class:"col-span-2 md:col-span-1"},v=(0,s._)("label",{for:"email",class:"block text-primary w-full mb-1"},"E-mail",-1),k={class:"relative"},C={key:0,class:"absolute top-1/2 right-5 -translate-y-1/2"},D=(0,s._)("img",{src:i,alt:"icon-checked",class:"bg-warning rounded-full"},null,-1),V=[D],q={key:1,class:"absolute top-1/2 right-5 -translate-y-1/2"},O=(0,s._)("img",{src:o,alt:"icon-checked",class:"bg-primary rounded-full"},null,-1),$=[O],W={class:"col-span-2 md:col-span-1"},z=(0,s._)("label",{for:"tel",class:"block text-primary w-full mb-1"},"電話",-1),F={class:"relative"},S={key:0,class:"absolute top-1/2 right-5 -translate-y-1/2"},j=(0,s._)("img",{src:i,alt:"icon-checked",class:"bg-warning rounded-full"},null,-1),U=[j],Z={key:1,class:"absolute top-1/2 right-5 -translate-y-1/2"},B=(0,s._)("img",{src:o,alt:"icon-checked",class:"bg-primary rounded-full"},null,-1),I=[B],P={class:"col-span-2 md:col-span-1"},E=(0,s._)("label",{for:"address",class:"block text-primary w-full mb-1"},"地址",-1),M={class:"relative"},H={key:0,class:"absolute top-1/2 right-5 -translate-y-1/2"},Y=(0,s._)("img",{src:i,alt:"icon-checked",class:"bg-warning rounded-full"},null,-1),K=[Y],A={key:1,class:"absolute top-1/2 right-5 -translate-y-1/2"},G=(0,s._)("img",{src:o,alt:"icon-checked",class:"bg-primary rounded-full"},null,-1),J=[G],L={class:"col-span-2"},N=(0,s._)("label",{for:"remark",class:"block text-primary w-full mb-1"},"備註",-1),Q=(0,s._)("h2",{class:"text-20px text-white"},"訂單資訊",-1),R={class:"px-[15px] py-5 md:p-5"},T=(0,s._)("li",{class:"hidden border-primary border-b-2 pb-2.5 md:flex"},[(0,s._)("div",{class:"w-2/5 lg:w-1/4"},[(0,s._)("span",{class:"text-primary"},"商品資訊")]),(0,s._)("div",{class:"w-1/5 lg:w-1/4"},[(0,s._)("span",{class:"text-primary"},"單件價格")]),(0,s._)("div",{class:"w-1/5 lg:w-1/4"},[(0,s._)("span",{class:"text-primary"},"數量")]),(0,s._)("div",{class:"w-1/5 lg:w-1/4"},[(0,s._)("span",{class:"text-primary"},"小計")])],-1),X={class:"w-full md:w-2/5 lg:w-1/4"},ee={class:"flex items-center mb-2.5 md:mb-0"},re=["src","alt"],te={class:"text-primary"},se={class:"w-full md:w-1/5 lg:w-1/4"},ae=(0,s._)("span",{class:"text-primary md:hidden"},"單件價格：",-1),le={class:"text-primary"},ie={class:"w-full md:w-1/5 lg:w-1/4"},oe={class:"my-2.5 md:my-0"},ce=(0,s._)("span",{class:"text-primary md:hidden"},"數量：",-1),ne={class:"text-primary"},pe={class:"w-full md:w-1/5 lg:w-1/4"},me=(0,s._)("span",{class:"text-primary md:hidden"},"小計：",-1),de={class:"text-primary"},ue={class:"text-right mt-5"},xe={key:0,class:"text-24px text-primary mb-5"},ge=["disabled"];function ye(e,r,t,i,o,y){const _=(0,s.up)("ProgressBar"),D=(0,s.up)("VField"),O=(0,s.up)("ErrorMessage"),j=(0,s.up)("VForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(_,{step:"2"}),(0,s._)("section",n,[p,(0,s.Wm)(j,{ref:"form",onSubmit:y.createOrder},{default:(0,s.w5)((({errors:t})=>[(0,s._)("div",m,[(0,s._)("div",d,[u,(0,s._)("div",x,[(0,s.Wm)(D,{type:"text",name:"姓名",id:"name",placeholder:"請輸入姓名",rules:"required",class:(0,a.C_)(["text-primary bg-secondary border-primary/50 border-2 w-full h-[60px] px-5",{"!border-warning":t["姓名"],"!border-primary":o.form.user.name&&!t["姓名"]}]),modelValue:o.form.user.name,"onUpdate:modelValue":r[0]||(r[0]=e=>o.form.user.name=e)},null,8,["class","modelValue"]),t["姓名"]?((0,s.wg)(),(0,s.iD)("div",g,f)):(0,s.kq)("",!0),o.form.user.name&&!t["姓名"]?((0,s.wg)(),(0,s.iD)("div",b,h)):(0,s.kq)("",!0)]),(0,s.Wm)(O,{name:"姓名",class:"block text-14px text-warning mt-1"})]),(0,s._)("div",w,[v,(0,s._)("div",k,[(0,s.Wm)(D,{type:"email",name:"email",id:"email",placeholder:"請輸入E-mail",rules:"email|required",class:(0,a.C_)(["text-primary bg-secondary border-primary/50 border-2 w-full h-[60px] px-5",{"!border-warning":t["email"],"!border-primary":o.form.user.email&&!t["email"]}]),modelValue:o.form.user.email,"onUpdate:modelValue":r[1]||(r[1]=e=>o.form.user.email=e)},null,8,["class","modelValue"]),t["email"]?((0,s.wg)(),(0,s.iD)("div",C,V)):(0,s.kq)("",!0),o.form.user.email&&!t["email"]?((0,s.wg)(),(0,s.iD)("div",q,$)):(0,s.kq)("",!0)]),(0,s.Wm)(O,{name:"email",class:"block text-14px text-warning mt-1"})]),(0,s._)("div",W,[z,(0,s._)("div",F,[(0,s.Wm)(D,{type:"tel",name:"電話",id:"tel",placeholder:"請輸入電話",rules:y.isPhone,class:(0,a.C_)(["text-primary bg-secondary border-primary/50 border-2 w-full h-[60px] px-5",{"!border-warning":t["電話"],"!border-primary":o.form.user.tel&&!t["電話"]}]),modelValue:o.form.user.tel,"onUpdate:modelValue":r[2]||(r[2]=e=>o.form.user.tel=e)},null,8,["rules","class","modelValue"]),t["電話"]?((0,s.wg)(),(0,s.iD)("div",S,U)):(0,s.kq)("",!0),o.form.user.tel&&!t["電話"]?((0,s.wg)(),(0,s.iD)("div",Z,I)):(0,s.kq)("",!0)]),(0,s.Wm)(O,{name:"電話",class:"block text-14px text-warning mt-1"})]),(0,s._)("div",P,[E,(0,s._)("div",M,[(0,s.Wm)(D,{type:"text",name:"地址",id:"address",placeholder:"請輸入地址",rules:"required",class:(0,a.C_)(["text-primary bg-secondary border-primary/50 border-2 w-full h-[60px] px-5",{"!border-warning":t["地址"],"!border-primary":o.form.user.address&&!t["地址"]}]),modelValue:o.form.user.address,"onUpdate:modelValue":r[3]||(r[3]=e=>o.form.user.address=e)},null,8,["class","modelValue"]),t["地址"]?((0,s.wg)(),(0,s.iD)("div",H,K)):(0,s.kq)("",!0),o.form.user.address&&!t["地址"]?((0,s.wg)(),(0,s.iD)("div",A,J)):(0,s.kq)("",!0)]),(0,s.Wm)(O,{name:"地址",class:"block text-14px text-warning mt-1"})]),(0,s._)("div",L,[N,(0,s.wy)((0,s._)("textarea",{name:"remark",id:"remark",class:(0,a.C_)(["text-primary bg-secondary border-primary/50 border-2 resize-none w-full min-h-[160px] p-5",{"!border-primary":o.form.message}]),"onUpdate:modelValue":r[4]||(r[4]=e=>o.form.message=e)},null,2),[[l.nr,o.form.message]])])]),(0,s._)("div",{class:"flex justify-between bg-primary p-[15px] md:p-5",onClick:r[5]||(r[5]=(...e)=>y.toggleOrderInfo&&y.toggleOrderInfo(...e))},[Q,(0,s._)("img",{src:c,alt:"icon-arrow-down",class:(0,a.C_)({"rotate-180":o.isOpen})},null,2)]),(0,s._)("div",R,[(0,s.wy)((0,s._)("ul",null,[T,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.cart.carts,(r=>((0,s.wg)(),(0,s.iD)("li",{class:"relative flex flex-wrap items-center border-primary border-b-2 py-[15px] md:py-5",key:r.id},[(0,s._)("div",X,[(0,s._)("div",ee,[(0,s._)("img",{src:r.product.imageUrl,alt:r.title,class:"w-20 h-20 object-cover mr-5"},null,8,re),(0,s._)("span",te,(0,a.zw)(r.product.title),1)])]),(0,s._)("div",se,[ae,(0,s._)("span",le,"$"+(0,a.zw)(e.$filters.currency(r.product.price)),1)]),(0,s._)("div",ie,[(0,s._)("div",oe,[ce,(0,s._)("span",ne,(0,a.zw)(r.qty),1)])]),(0,s._)("div",pe,[me,(0,s._)("span",de,"$"+(0,a.zw)(e.$filters.currency(r.total)),1)])])))),128))],512),[[l.F8,o.isOpen]]),(0,s._)("div",ue,[(0,s._)("p",{class:(0,a.C_)(["mb-2",{"text-20px text-primary/50 line-through":o.cart.total!==o.cart.final_total,"text-24px text-primary":o.cart.total===o.cart.final_total}])}," 總計金額 : $"+(0,a.zw)(e.$filters.currency(o.cart.total)),3),o.cart.total!==o.cart.final_total?((0,s.wg)(),(0,s.iD)("p",xe," 折扣後金額 : $"+(0,a.zw)(e.$filters.currency(Math.round(o.cart.final_total))),1)):(0,s.kq)("",!0),(0,s._)("button",{type:"submit",class:(0,a.C_)(["btn-light text-white bg-primary px-12 py-[18px]",{"pointer-events-none opacity-50":Object.keys(t).length>0||!y.checkFormData}]),disabled:Object.keys(t).length>0||!y.checkFormData}," 送出訂單 ",10,ge)])])])),_:1},8,["onSubmit"])])],64)}var fe=t(6455),be=t.n(fe),_e=t(5679),he=t(9027),we={components:{ProgressBar:he.Z},computed:{checkFormData(){const e=["name","email","tel","address"];return e.every((e=>""!==this.form.user[e]))}},data(){return{cart:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},id:"",isOpen:!0}},methods:{getCart(){const e="https://vue3-course-api.hexschool.io/v2/api/rousong/cart";this.$http.get(e).then((e=>{this.cart=e.data.data})).catch((e=>{be().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},isPhone(e){const r=/^(09)[0-9]{8}$/;return!!r.test(e)||"請輸入正確的電話號碼"},toggleOrderInfo(){this.isOpen=!this.isOpen},createOrder(){const e="https://vue3-course-api.hexschool.io/v2/api/rousong/order",r=this.form,t="建立訂單成功";this.$http.post(e,{data:r}).then((e=>{be().fire({position:"top-end",icon:"success",title:t,showConfirmButton:!1,timer:1500}),this.$refs.form.resetForm(),this.form.message="",this.$router.push({name:"checkorder",params:{id:e.data.orderId}}),_e.Z.emit("get-cart")})).catch((e=>{be().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))}},mounted(){this.getCart()}},ve=t(3744);const ke=(0,ve.Z)(we,[["render",ye]]);var Ce=ke},3395:function(e,r,t){e.exports=t.p+"img/icon-arrow-down.db876a28.svg"},7188:function(e,r,t){e.exports=t.p+"img/icon-checked.a49d3696.svg"},4768:function(e,r,t){e.exports=t.p+"img/icon-progress-arrow.8df09585.svg"},9450:function(e,r,t){e.exports=t.p+"img/icon-remind.8d225e95.svg"}}]);
//# sourceMappingURL=446.f8bcfb82.js.map