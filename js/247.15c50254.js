"use strict";(self["webpackChunkdoublebrunch"]=self["webpackChunkdoublebrunch"]||[]).push([[247],{2247:function(t,e,r){r.r(e),r.d(e,{default:function(){return kt}});var i=r(6252),s=r(3577),o=r(9963),a=r(4220),l=r(9653);const c={class:"flex flex-wrap border-primary border-b-2 lg:min-h-[calc(100vh-140px)]"},p={class:"w-full lg:w-1/2"},n={class:"relative pt-[100%] h-full lg:pt-0"},d=["src","alt"],u={class:"w-full lg:w-1/2"},m={class:"p-[15px] md:p-10 lg:p-[60px]"},h={class:"text-primary opacity-50"},x={class:"text-24px text-primary mb-[15px] md:text-32px md:mb-5 lg:text-40px"},f={class:"text-primary mb-2"},g={class:"text-12px text-primary mb-[15px] md:text-14px md:mb-[30px]"},y={class:"mb-[15px] md:mb-10"},w={key:0,class:"block text-24px text-primary mt-1 md:text-32px"},v={class:"border-primary border-2"},b={class:"flex border-primary border-b-2"},_=["disabled"],k=["disabled"],C={class:"relative h-[60px]"},q=["disabled"],N=(0,i._)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",class:"duration-[400ms] stroke-primary group-hover:stroke-white"},[(0,i._)("rect",{width:"16",height:"12",rx:"3",transform:"translate(2 6)",fill:"none","stroke-width":"2"}),(0,i._)("path",{d:"M13,9V5A4,4,0,0,0,5,5V9",transform:"translate(1 1)",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),z=(0,i._)("span",{class:"ml-3"},"加入購物車",-1),j=[N,z],L={class:"absolute inset-0 flex justify-center items-center bg-primary"},$=(0,i.uE)('<div class="flex items-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-white">加入中...</span></div>',1),B=[$],S={key:0,class:"block text-warning mt-2"},P=(0,i.uE)('<section><div class="flex border-primary border-b-2"><div class="w-full md:w-[calc(100%-240px)]"><div class="border-primary border-r-2"><div class="border-primary border-b-2 h-[60px] md:h-20"><h3 class="flex items-center text-20px text-primary h-full p-[15px] md:hidden"> 注意事項 </h3></div><ul class="p-[15px] md:pl-10 md:pr-5 md:py-[30px]"><li class="mb-5 md:mb-10"><h3 class="text-20px text-primary mb-[15px] md:text-24px md:mb-5"> 餐點注意事項 </h3><p class="text-primary leading-loose"> 餐點皆為現點現做，為保食物品質，請儘早食用，隔餐勿食。<br> 因冰品及甜點皆是手工製作，若當下未立即食用，請將其冷藏、冷凍，並於兩天內食用完畢。<br> 餐點內的季節水果，會隨著每季做更換，若有疑慮可提前詢問。 </p></li><li><h3 class="text-20px text-primary mb-[15px] md:text-24px md:mb-5"> 退款須知 </h3><p class="text-primary leading-loose"> 依《消費者保護法》及《食品安全衛生管理法》之規定，如遇餐點包裝瑕疵、餐點品項不符……等狀況，請立即聯絡本店，如情形屬實，皆可選擇重新製作或退款。 </p></li></ul></div></div><div class="hidden md:block md:w-[240px]"><div class="border-primary border-b-2 h-20"><h3 class="flex justify-center items-center text-24px text-primary h-full"> 注意事項 </h3></div></div></div></section>',1),V={class:"flex flex-row-reverse"},I={class:"w-full md:w-[calc(100%-240px)]"},D={class:"border-primary border-l-2"},Z=(0,i._)("div",{class:"border-primary border-b-2 h-[60px] md:h-20"},[(0,i._)("h3",{class:"flex items-center text-20px text-primary h-full p-[15px] md:hidden"}," 相關餐點 ")],-1),M={class:"p-[15px] md:p-5"},F={class:"relative border-primary border-2"},A={class:"absolute top-0 left-5 z-20"},H=(0,i._)("img",{src:a,alt:"標籤"},null,-1),J={class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-white"},O={class:"relative pt-[100%] overflow-hidden"},T=["src","alt"],U={class:"flex justify-between border-primary border-b-2 p-5"},W={class:"text-20px text-primary"},E={class:"text-20px text-primary"},R={class:"flex"},Y=["onClick"],K={key:0,src:l,alt:"愛心",class:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},G={key:1,class:"duration-300 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 stroke-primary fill-transparent group-hover:fill-primary",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"20",height:"20",viewBox:"0 0 20 20"},Q=(0,i._)("defs",null,[(0,i._)("clipPath",{id:"clip-icon-favorite"},[(0,i._)("rect",{width:"20",height:"20"})])],-1),X=(0,i._)("g",{id:"icon-favorite","clip-path":"url(#clip-icon-favorite)"},[(0,i._)("path",{id:"heart-solid",d:"M14.435,32.924a4.273,4.273,0,0,0-5.831.425l-.616.634-.616-.634a4.273,4.273,0,0,0-5.831-.425,4.487,4.487,0,0,0-.309,6.5l6.047,6.244a.98.98,0,0,0,1.416,0l6.047-6.244a4.484,4.484,0,0,0-.306-6.5Z",transform:"translate(2.012 -28.967)","stroke-width":"2"})],-1),tt=[Q,X],et={class:"relative flex-1"},rt={key:0,type:"button",class:"flex justify-center items-center text-primary border-primary border-l-2 w-full h-full pointer-events-none"},it=["onClick"],st=(0,i._)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",class:"duration-[400ms] stroke-primary group-hover:stroke-white"},[(0,i._)("rect",{width:"16",height:"12",rx:"3",transform:"translate(2 6)",fill:"none","stroke-width":"2"}),(0,i._)("path",{d:"M13,9V5A4,4,0,0,0,5,5V9",transform:"translate(1 1)",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),ot=(0,i._)("span",{class:"ml-3"},"加入購物車",-1),at=[st,ot],lt={class:"absolute inset-0 flex justify-center items-center bg-primary"},ct=(0,i._)("div",{class:"flex items-center"},[(0,i._)("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,i._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),(0,i._)("span",{class:"text-white"},"加入中...")],-1),pt=[ct],nt=(0,i._)("div",{class:"hidden md:block md:w-[240px]"},[(0,i._)("div",{class:"border-primary border-b-2 h-20"},[(0,i._)("h3",{class:"flex justify-center items-center text-24px text-primary h-full"}," 相關餐點 ")])],-1);function dt(t,e,r,a,l,N){const z=(0,i.up)("LoadingComponent"),$=(0,i.up)("router-link"),Q=(0,i.up)("SwiperSlide"),X=(0,i.up)("Swiper");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(z,{isLoading:t.isLoading},null,8,["isLoading"]),(0,i._)("section",null,[(0,i._)("div",c,[(0,i._)("div",p,[(0,i._)("div",n,[(0,i._)("img",{src:l.product.imageUrl,alt:l.product.title,class:"absolute top-0 left-0 w-full h-full object-cover lg:relative"},null,8,d)])]),(0,i._)("div",u,[(0,i._)("div",m,[(0,i._)("span",h,(0,s.zw)(l.product.category),1),(0,i._)("h2",x,(0,s.zw)(l.product.title),1),(0,i._)("p",f,(0,s.zw)(l.product.description),1),(0,i._)("p",g,(0,s.zw)(l.product.content),1),(0,i._)("div",y,[(0,i._)("span",{class:(0,s.C_)(["block",{"text-primary/50 line-through md:text-24px":l.product.origin_price!==l.product.price,"text-24px text-primary md:text-32px":l.product.origin_price===l.product.price}])},"原價 $"+(0,s.zw)(t.$filters.currency(l.product.origin_price)),3),l.product.origin_price!==l.product.price?((0,i.wg)(),(0,i.iD)("span",w,"特價 $"+(0,s.zw)(t.$filters.currency(l.product.price)),1)):(0,i.kq)("",!0)]),(0,i._)("div",v,[(0,i._)("div",b,[(0,i._)("button",{type:"button",class:(0,s.C_)(["duration-300 relative w-[60px] h-[60px] group",{"cursor-not-allowed opacity-30":1===l.qty,"hover:bg-primary":l.qty>1}]),disabled:1===l.qty,onClick:e[0]||(e[0]=t=>l.qty-=1)},[(0,i._)("span",{class:(0,s.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary w-4 h-[2px]",{"group-hover:bg-white":l.qty>1}])},null,2)],10,_),(0,i.wy)((0,i._)("input",{type:"text",class:"text-primary text-center bg-secondary border-primary border-x-2 flex-1 w-full h-[60px]",onkeyup:"value=value.replace(/[^\\d]/g,'').replace(/^0{1,}/g,'')","onUpdate:modelValue":e[1]||(e[1]=t=>l.qty=t)},null,512),[[o.nr,l.qty,void 0,{number:!0}]]),(0,i._)("button",{type:"button",class:(0,s.C_)(["duration-300 relative w-[60px] h-[60px] group",{"cursor-not-allowed opacity-30":l.qty===N.maxNum||l.qty>N.maxNum,"hover:bg-primary":l.qty<N.maxNum}]),disabled:l.qty===N.maxNum||l.qty>N.maxNum,onClick:e[2]||(e[2]=t=>l.qty+=1)},[(0,i._)("span",{class:(0,s.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary w-4 h-[2px]",{"group-hover:bg-white":l.qty<N.maxNum}])},null,2),(0,i._)("span",{class:(0,s.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rotate-90 bg-primary w-4 h-[2px]",{"group-hover:bg-white":l.qty<N.maxNum}])},null,2)],10,k)]),(0,i._)("div",C,[(0,i._)("button",{type:"button",class:(0,s.C_)(["btn duration-[400ms] flex justify-center items-center w-full h-full group",{"opacity-30 pointer-events-none":l.qty>N.maxNum}]),disabled:l.qty>N.maxNum,onClick:e[3]||(e[3]=t=>N.addToCart(l.product.id,l.qty))},j,10,q),(0,i.wy)((0,i._)("div",L,B,512),[[o.F8,l.isLoadingItem===l.product.id]]),l.qty>N.maxNum?((0,i.wg)(),(0,i.iD)("span",S,"商品數量剩餘: "+(0,s.zw)(N.maxNum)+"個",1)):(0,i.kq)("",!0)])])])])])]),P,(0,i._)("section",null,[(0,i._)("div",V,[(0,i._)("div",I,[(0,i._)("div",D,[Z,(0,i._)("div",M,[(0,i.Wm)(X,{"slides-per-view":1,"space-between":20,breakpoints:{992:{slidesPerView:2},1200:{slidesPerView:3},1440:{slidesPerView:4}}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.filterProducts,(e=>((0,i.wg)(),(0,i.j4)(Q,{key:e.id},{default:(0,i.w5)((()=>[(0,i._)("div",F,[(0,i._)("div",A,[H,(0,i._)("span",J,(0,s.zw)(e.category),1)]),(0,i.Wm)($,{to:`/product/${e.id}`,class:"group block"},{default:(0,i.w5)((()=>[(0,i._)("div",O,[(0,i._)("img",{src:e.imageUrl,alt:e.title,class:"duration-300 absolute top-0 left-0 w-full h-full object-cover group-hover:scale-110"},null,8,T)])])),_:2},1032,["to"]),(0,i._)("div",U,[(0,i._)("h4",W,(0,s.zw)(e.title),1),(0,i._)("span",E,(0,s.zw)(t.$filters.currency(e.price)),1)]),(0,i._)("div",R,[(0,i._)("button",{type:"button",class:"relative w-[60px] h-[60px] group",onClick:t=>N.toggleFavorite(e)},[N.isFavorite(e)?((0,i.wg)(),(0,i.iD)("img",K)):((0,i.wg)(),(0,i.iD)("svg",G,tt))],8,Y),(0,i._)("div",et,[N.isMaxNum(e)?((0,i.wg)(),(0,i.iD)("button",rt," 商品已達購買上限 ")):((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"btn duration-[400ms] flex justify-center items-center border-primary border-l-2 w-full h-full group",onClick:t=>N.addToCart(e.id)},at,8,it)),(0,i.wy)((0,i._)("div",lt,pt,512),[[o.F8,l.isLoadingItem===e.id]])])])])])),_:2},1024)))),128))])),_:1})])])]),nt])])],64)}var ut=r(6455),mt=r.n(ut),ht=r(5679),xt=r(3181),ft=r(8262),gt=r(6294),yt=r(8729);const wt=(0,gt.Z)();var vt={components:{Swiper:xt.tq,SwiperSlide:xt.o5,LoadingComponent:yt.Z},inject:["routerRefresh"],watch:{$route:{handler(){this.routerRefresh()}},favorite:{handler(){localStorage.setItem("favorite",JSON.stringify(this.favorite)),ht.Z.emit("get-favorite")},deep:!0}},data(){return{products:[],product:{},cart:{carts:[]},favorite:JSON.parse(localStorage.getItem("favorite"))||[],qty:1,isLoadingItem:""}},computed:{...(0,ft.rn)(gt.Z,["isLoading"]),filterProducts(){const{category:t,id:e}=this.product;return this.products.filter((r=>r.category===t&&r.id!==e))},maxNum(){const t=this.cart.carts.filter((t=>t.product_id===this.product.id))[0];return t?30-t.qty:30}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/v2/api/rousong/products/all";this.$http.get(t).then((t=>{this.products=t.data.products})).catch((t=>{mt().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},getProduct(){wt.isLoading=!0;const{id:t}=this.$route.params,e=`https://vue3-course-api.hexschool.io/v2/api/rousong/product/${t}`;this.$http.get(e).then((t=>{this.product=t.data.product,wt.isLoading=!1})).catch((t=>{mt().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/rousong/cart";this.$http.get(t).then((t=>{this.cart=t.data.data})).catch((t=>{mt().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},addToCart(t,e=1){this.isLoadingItem=t;const r={product_id:t,qty:e},i="https://vue3-course-api.hexschool.io/v2/api/rousong/cart",s="已加入購物車";this.$http.post(i,{data:r}).then((()=>{this.product.stock-=1,mt().fire({position:"top-end",icon:"success",title:s,showConfirmButton:!1,timer:1500}),ht.Z.emit("get-cart"),this.getCart(),this.qty=1,this.isLoadingItem=""})).catch((t=>{mt().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},toggleFavorite(t){const e=this.favorite.findIndex((e=>e.id===t.id));-1===e?(this.favorite.push(t),mt().fire({position:"top-end",icon:"success",title:"已加入我的最愛",showConfirmButton:!1,timer:1500})):(this.favorite.splice(e,1),mt().fire({position:"top-end",icon:"success",title:"已移除我的最愛",showConfirmButton:!1,timer:1500}))},isFavorite(t){return this.favorite.some((e=>e.id===t.id))},isMaxNum(t){const e=this.cart.carts.filter((e=>e.product_id===t.id))[0];return e&&30===e.qty}},mounted(){this.getProduct(),this.getProducts(),this.getCart(),ht.Z.on("update-favorite",(()=>{this.favorite=JSON.parse(localStorage.getItem("favorite"))||[]}))}},bt=r(3744);const _t=(0,bt.Z)(vt,[["render",dt]]);var kt=_t}}]);
//# sourceMappingURL=247.15c50254.js.map