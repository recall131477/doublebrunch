"use strict";(self["webpackChunkdoublebrunch"]=self["webpackChunkdoublebrunch"]||[]).push([[921],{5679:function(e,t,r){function i(e){return{all:e=e||new Map,on:function(t,r){var i=e.get(t);i?i.push(r):e.set(t,[r])},off:function(t,r){var i=e.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var i=e.get(t);i&&i.slice().map((function(e){e(r)})),(i=e.get("*"))&&i.slice().map((function(e){e(t,r)}))}}}r.d(t,{Z:function(){return s}});const a=i();var s=a},8268:function(e,t,r){r.d(t,{Z:function(){return f}});var i=r(6252),a=r(3577),s=r(5604),o=r(6058);const n={class:"flex justify-center h-[60px] border-primary border-t-2"},l=["disabled"],d=(0,i._)("img",{src:s,alt:"icon-arrow-left",class:"duration-300 group-hover:scale-110"},null,-1),p=[d],c=["onClick"],u=["disabled"],m=(0,i._)("img",{src:o,alt:"icon-arrow-right",class:"duration-300 group-hover:scale-110"},null,-1),h=[m];function g(e,t,r,s,o,d){return(0,i.wg)(),(0,i.iD)("ul",n,[(0,i._)("li",null,[(0,i._)("button",{type:"button",class:(0,a.C_)(["flex justify-center items-center opacity-50 h-full cursor-not-allowed px-[25px] group",{"opacity-100 cursor-pointer":r.pages.has_pre}]),disabled:1===r.pages.current_page,onClick:t[0]||(t[0]=e=>d.changePages(r.pages.current_page-1))},p,10,l)]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.pages.total_pages,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},[(0,i._)("button",{type:"button",class:(0,a.C_)(["duration-300 flex justify-center items-center text-primary opacity-50 h-full px-[15px] hover:text-primary hover:opacity-100",{"opacity-100":e===r.pages.current_page}]),onClick:t=>d.changePages(e)},(0,a.zw)(e),11,c)])))),128)),(0,i._)("li",null,[(0,i._)("button",{type:"button",class:(0,a.C_)(["flex justify-center items-center opacity-50 h-full cursor-not-allowed px-[25px] group",{"opacity-100 cursor-pointer":r.pages.has_next}]),disabled:r.pages.current_page===r.pages.total_pages,onClick:t[1]||(t[1]=e=>d.changePages(r.pages.current_page+1))},h,10,u)])])}var y={props:{pages:{type:Object,default(){return{}}}},methods:{changePages(e){this.$emit("change-pages",e)}}},_=r(3744);const w=(0,_.Z)(y,[["render",g]]);var f=w},1664:function(e,t,r){r.d(t,{Z:function(){return v}});var i=r(6252),a=r(3577);const s={class:"relative flex justify-center items-center w-full min-h-[calc(100%-2.5rem)] max-w-[960px] pointer-events-none mx-auto my-5"},o={class:"w-full pointer-events-auto"},n=(0,i._)("h2",{class:"text-white bg-warning text-center py-5"},"刪除",-1),l={class:"bg-secondary"},d={class:"p-5"},p={key:0,class:"text-20px text-primary"},c={key:1,class:"text-20px text-primary"},u={key:2,class:"text-20px text-primary"},m={key:3,class:"text-20px text-primary"},h={class:"text-right border-primary border-t-2 p-5"};function g(e,t,r,g,y,_){return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["duration-300 fixed overflow-y-auto z-[1000] inset-0",{"opacity-0 invisible":!y.isOpen,"opacity-100 visible":y.isOpen}])},[(0,i._)("div",{class:"fixed top-0 left-0 w-full h-full bg-primary bg-opacity-50",onClick:t[0]||(t[0]=(...e)=>_.closeModal&&_.closeModal(...e))}),(0,i._)("div",s,[(0,i._)("div",o,[n,(0,i._)("div",l,[(0,i._)("div",d,["product"===r.navItem?((0,i.wg)(),(0,i.iD)("h3",p," 是否刪除商品："+(0,a.zw)(r.delProduct.title)+" (刪除後將無法恢復) ",1)):(0,i.kq)("",!0),"order"===r.navItem?((0,i.wg)(),(0,i.iD)("h3",c," 是否刪除訂單編號："+(0,a.zw)(r.delOrder.id)+" (刪除後將無法恢復) ",1)):(0,i.kq)("",!0),"coupon"===r.navItem?((0,i.wg)(),(0,i.iD)("h3",u," 是否刪除優惠券："+(0,a.zw)(r.delCoupon.title)+" (刪除後將無法恢復) ",1)):(0,i.kq)("",!0),"article"===r.navItem?((0,i.wg)(),(0,i.iD)("h3",m," 是否刪除文章："+(0,a.zw)(r.delArticle.title)+" (刪除後將無法恢復) ",1)):(0,i.kq)("",!0)]),(0,i._)("div",h,[(0,i._)("button",{type:"button",class:"duration-300 text-warning border-warning border-2 px-12 py-2.5 hover:text-white hover:bg-warning",onClick:t[1]||(t[1]=(...e)=>_.closeModal&&_.closeModal(...e))}," 取消 "),"product"===r.navItem?((0,i.wg)(),(0,i.iD)("button",{key:0,type:"button",class:"duration-300 text-primary border-primary border-2 px-12 py-2.5 ml-2.5 hover:text-white hover:bg-primary",onClick:t[2]||(t[2]=(...e)=>_.deleteProduct&&_.deleteProduct(...e))}," 確認刪除 ")):(0,i.kq)("",!0),"order"===r.navItem?((0,i.wg)(),(0,i.iD)("button",{key:1,type:"button",class:"duration-300 text-primary border-primary border-2 px-12 py-2.5 ml-2.5 hover:text-white hover:bg-primary",onClick:t[3]||(t[3]=(...e)=>_.deleteOrder&&_.deleteOrder(...e))}," 確認刪除 ")):(0,i.kq)("",!0),"coupon"===r.navItem?((0,i.wg)(),(0,i.iD)("button",{key:2,type:"button",class:"duration-300 text-primary border-primary border-2 px-12 py-2.5 ml-2.5 hover:text-white hover:bg-primary",onClick:t[4]||(t[4]=(...e)=>_.deleteCoupon&&_.deleteCoupon(...e))}," 確認刪除 ")):(0,i.kq)("",!0),"article"===r.navItem?((0,i.wg)(),(0,i.iD)("button",{key:3,type:"button",class:"duration-300 text-primary border-primary border-2 px-12 py-2.5 ml-2.5 hover:text-white hover:bg-primary",onClick:t[5]||(t[5]=(...e)=>_.deleteArticle&&_.deleteArticle(...e))}," 確認刪除 ")):(0,i.kq)("",!0)])])])])],2)}var y=r(6455),_=r.n(y),w={props:{delProduct:{type:Object,default(){return{}}},delOrder:{type:Object,default(){return{}}},delCoupon:{type:Object,default(){return{}}},delArticle:{type:Object,default(){return{}}},currentPage:{type:Number,default:1},navItem:{type:String,default:""}},data(){return{isOpen:!1}},methods:{deleteProduct(){const e="刪除商品成功",{id:t}=this.delProduct,r=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/product/${t}`;this.$http.delete(r).then((()=>{_().fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:1500}),this.$emit("update-product",this.currentPage),this.closeModal()})).catch((e=>{_().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},deleteOrder(){const e="刪除訂單成功",{id:t}=this.delOrder,r=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/order/${t}`;this.$http.delete(r).then((()=>{_().fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:1500}),this.$emit("update-order",this.currentPage),this.closeModal()})).catch((e=>{_().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},deleteCoupon(){const e="刪除優惠券成功",{id:t}=this.delCoupon,r=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/coupon/${t}`;this.$http.delete(r).then((()=>{_().fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:1500}),this.$emit("update-coupon",this.currentPage),this.closeModal()})).catch((e=>{_().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},deleteArticle(){const e="刪除文章成功",{id:t}=this.delArticle,r=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/article/${t}`;this.$http.delete(r).then((()=>{_().fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:1500}),this.$emit("update-article",this.currentPage),this.closeModal()})).catch((e=>{_().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},openModal(){this.isOpen=!0},closeModal(){this.isOpen=!1}}},f=r(3744);const b=(0,f.Z)(w,[["render",g]]);var v=b},3921:function(e,t,r){r.r(t),r.d(t,{default:function(){return De}});var i=r(6252),a=r(3577),s=r(9963);const o={class:"border-primary border-t-2 mt-10"},n=(0,i._)("li",null,[(0,i._)("ul",{class:"grid grid-cols-6 text-primary px-5 py-2.5"},[(0,i._)("li",null,"購買時間"),(0,i._)("li",null,"Email"),(0,i._)("li",null,"購買款項"),(0,i._)("li",null,"應付金額"),(0,i._)("li",null,"是否付款"),(0,i._)("li",null,"編輯")])],-1),l={class:"grid grid-cols-6 items-center text-primary border-primary border-t-2 px-5 py-2.5"},d={class:"flex items-center"},p=["id","disabled","onUpdate:modelValue","onChange"],c=["for"],u={key:0},m={class:"grid grid-cols-2 gap-x-2.5"},h={class:"col-span-1"},g=["onClick"],y={class:"col-span-1"},_=["onClick"];function w(e,t,r,w,f,b){const v=(0,i.up)("Pagination"),x=(0,i.up)("OrderModal"),O=(0,i.up)("DeleteModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("ul",o,[n,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(f.orders,((t,r)=>((0,i.wg)(),(0,i.iD)("li",{key:r},[(0,i._)("ul",l,[(0,i._)("li",null,(0,a.zw)(e.$filters.date(t.create_at)),1),(0,i._)("li",null,(0,a.zw)(t.user.email),1),(0,i._)("li",null,[(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.products,((e,t)=>((0,i.wg)(),(0,i.iD)("li",{key:t},(0,a.zw)(e.product.title)+"： "+(0,a.zw)(e.qty)+" "+(0,a.zw)(e.product.unit),1)))),128))])]),(0,i._)("li",null,(0,a.zw)(e.$filters.currency(Math.round(t.total))),1),(0,i._)("li",null,[(0,i._)("div",d,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:`${t.id}`,class:"btn-check mr-2",disabled:f.tempId===t.id,"onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>b.updatePaid(t)},null,40,p),[[s.e8,t.is_paid]]),(0,i._)("label",{for:`${t.id}`},[t.is_paid?((0,i.wg)(),(0,i.iD)("span",u,"已付款")):((0,i.wg)(),(0,i.iD)("span",{key:1,class:(0,a.C_)({"text-warning":!t.is_paid})},"未付款",2))],8,c)])]),(0,i._)("li",m,[(0,i._)("div",h,[(0,i._)("button",{type:"button",class:"duration-300 border-primary border-2 w-full py-2.5 hover:text-white hover:bg-primary",onClick:e=>b.openModal("edit",t)}," 編輯 ",8,g)]),(0,i._)("div",y,[(0,i._)("button",{type:"button",class:"duration-300 text-warning border-warning border-2 w-full py-2.5 hover:text-white hover:bg-warning",onClick:e=>b.openModal("delete",t)}," 刪除 ",8,_)])])])])))),128))]),f.pagination.total_pages>1?((0,i.wg)(),(0,i.j4)(v,{key:0,pages:f.pagination,onChangePages:b.getOrders},null,8,["pages","onChangePages"])):(0,i.kq)("",!0),(0,i.Wm)(x,{ref:"orderModal",order:f.tempOrder,currentPage:f.pagination.current_page,onUpdatePaid:b.getOrders,onCancelId:b.cancelId},null,8,["order","currentPage","onUpdatePaid","onCancelId"]),(0,i.Wm)(O,{ref:"delOrderModal",delOrder:f.tempOrder,currentPage:f.pagination.current_page,navItem:f.navItem,onUpdateOrder:b.getOrders},null,8,["delOrder","currentPage","navItem","onUpdateOrder"])],64)}var f=r(6455),b=r.n(f),v=r(5679),x=r(8268);const O={class:"relative flex justify-center items-center w-full min-h-[calc(100%-2.5rem)] max-w-[960px] pointer-events-none mx-auto my-5"},k={class:"w-full pointer-events-auto"},C=(0,i._)("h2",{class:"text-white bg-primary text-center py-5"},"訂單細節",-1),P={class:"bg-secondary"},M={class:"grid grid-cols-2 gap-5 p-5"},D={class:"col-span-1"},$=(0,i._)("h3",{class:"text-24px text-primary mb-5"},"用戶資料",-1),z={key:0,class:"text-primary"},I={class:"flex pb-5"},j=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"姓名")],-1),q={class:"w-1/2"},B={class:"flex border-primary border-t-2 py-5"},Z=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"Email")],-1),N={class:"w-1/2"},S={class:"flex border-primary border-t-2 py-5"},U=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"電話")],-1),A={class:"w-1/2"},J={class:"flex border-primary border-t-2 pt-5"},H=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"地址")],-1),Y={class:"w-1/2"},K={class:"col-span-1"},V=(0,i._)("h3",{class:"text-24px text-primary mb-5"},"訂單細節",-1),E={class:"text-primary"},W={class:"flex pb-5"},F=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"訂單編號")],-1),G={class:"w-1/2"},L=(0,i._)("li",{class:"flex border-primary border-t-2 py-5"},[(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"下單時間")]),(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"2022/4/2")])],-1),Q={class:"flex border-primary border-t-2 py-5"},R=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"付款時間")],-1),T={class:"w-1/2"},X={key:0},ee={key:1},te={class:"flex border-primary border-t-2 py-5"},re=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"付款狀態")],-1),ie={class:"w-1/2"},ae={key:0,class:"text-primary"},se={key:1,class:"text-warning"},oe={class:"flex border-primary border-t-2 pt-5"},ne=(0,i._)("div",{class:"w-1/2"},[(0,i._)("span",null,"總金額")],-1),le={class:"w-1/2"},de={class:"col-span-2"},pe=(0,i._)("h3",{class:"text-24px text-primary mb-5"},"選購商品",-1),ce={class:"shopping text-primary"},ue={class:"w-1/3"},me={class:"w-1/3"},he={class:"w-1/3"},ge={class:"flex justify-end items-center"},ye={for:"is_paid"},_e={key:0,class:"text-primary"},we={key:1,class:"text-warning"},fe={class:"text-right border-primary border-t-2 p-5"};function be(e,t,r,o,n,l){return(0,i.wg)(),(0,i.iD)("div",{class:(0,a.C_)(["duration-300 fixed overflow-y-auto z-[1000] inset-0",{"opacity-0 invisible":!n.isOpen,"opacity-100 visible":n.isOpen}])},[(0,i._)("div",{class:"fixed top-0 left-0 w-full h-full bg-primary bg-opacity-50",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}),(0,i._)("div",O,[(0,i._)("div",k,[C,(0,i._)("div",P,[(0,i._)("div",M,[(0,i._)("div",D,[$,n.tempOrder.user?((0,i.wg)(),(0,i.iD)("ul",z,[(0,i._)("li",I,[j,(0,i._)("div",q,[(0,i._)("span",null,(0,a.zw)(n.tempOrder.user.name),1)])]),(0,i._)("li",B,[Z,(0,i._)("div",N,[(0,i._)("span",null,(0,a.zw)(n.tempOrder.user.email),1)])]),(0,i._)("li",S,[U,(0,i._)("div",A,[(0,i._)("span",null,(0,a.zw)(n.tempOrder.user.tel),1)])]),(0,i._)("li",J,[H,(0,i._)("div",Y,[(0,i._)("span",null,(0,a.zw)(n.tempOrder.user.address),1)])])])):(0,i.kq)("",!0)]),(0,i._)("div",K,[V,(0,i._)("ul",E,[(0,i._)("li",W,[F,(0,i._)("div",G,[(0,i._)("span",null,(0,a.zw)(n.tempOrder.id),1)])]),L,(0,i._)("li",Q,[R,(0,i._)("div",T,[n.tempOrder.paid_date?((0,i.wg)(),(0,i.iD)("span",X,(0,a.zw)(e.$filters.date(n.tempOrder.paid_date)),1)):((0,i.wg)(),(0,i.iD)("span",ee,"時間不正確"))])]),(0,i._)("li",te,[re,(0,i._)("div",ie,[n.tempOrder.is_paid?((0,i.wg)(),(0,i.iD)("span",ae,"已付款")):((0,i.wg)(),(0,i.iD)("span",se,"未付款"))])]),(0,i._)("li",oe,[ne,(0,i._)("div",le,[(0,i._)("span",null,(0,a.zw)(e.$filters.currency(n.tempOrder.total)),1)])])])]),(0,i._)("div",de,[pe,(0,i._)("ul",ce,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.tempOrder.products,(t=>((0,i.wg)(),(0,i.iD)("li",{class:"flex border-primary border-t-2 py-5",key:t.id},[(0,i._)("div",ue,[(0,i._)("span",null,(0,a.zw)(t.product.title),1)]),(0,i._)("div",me,[(0,i._)("span",null,(0,a.zw)(t.qty)+" / "+(0,a.zw)(t.product.unit),1)]),(0,i._)("div",he,[(0,i._)("span",null,(0,a.zw)(e.$filters.currency(t.final_total)),1)])])))),128))]),(0,i._)("div",ge,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"is_paid",class:"btn-check mr-2","onUpdate:modelValue":t[1]||(t[1]=e=>n.tempOrder.is_paid=e)},null,512),[[s.e8,n.tempOrder.is_paid]]),(0,i._)("label",ye,[n.tempOrder.is_paid?((0,i.wg)(),(0,i.iD)("span",_e,"已付款")):((0,i.wg)(),(0,i.iD)("span",we,"未付款"))])])])]),(0,i._)("div",fe,[(0,i._)("button",{type:"button",class:"duration-300 text-warning border-warning border-2 px-12 py-2.5 hover:text-white hover:bg-warning",onClick:t[2]||(t[2]=(...e)=>l.closeModal&&l.closeModal(...e))}," 取消 "),(0,i._)("button",{type:"button",class:"duration-300 text-primary border-primary border-2 px-12 py-2.5 ml-2.5 hover:text-white hover:bg-primary",onClick:t[3]||(t[3]=e=>l.updatePaid(n.tempOrder))}," 修改 ")])])])])],2)}var ve={props:{order:{type:Object,default(){return{}}},currentPage:{type:Number,default:1}},watch:{order(){this.tempOrder=JSON.parse(JSON.stringify(this.order))}},data(){return{isOpen:!1,tempOrder:{}}},methods:{updatePaid(e){const t=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/order/${e.id}`,r={is_paid:e.is_paid},i="更新付款狀態成功";this.$http.put(t,{data:r}).then((()=>{b().fire({position:"top-end",icon:"success",title:i,showConfirmButton:!1,timer:1500}),this.$emit("update-paid",this.currentPage),this.$emit("cancel-id"),this.closeModal()})).catch((e=>{b().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},openModal(){this.isOpen=!0},closeModal(){this.isOpen=!1}},mounted(){v.Z.on("update-paid",(e=>{this.tempOrder=e,this.updatePaid(e)}))}},xe=r(3744);const Oe=(0,xe.Z)(ve,[["render",be]]);var ke=Oe,Ce=r(1664),Pe={components:{Pagination:x.Z,OrderModal:ke,DeleteModal:Ce.Z},data(){return{orders:{},status:"",pagination:{},tempOrder:{},navItem:"order",tempId:""}},methods:{getOrders(e=1){const t=`https://vue3-course-api.hexschool.io/v2/api/rousong/admin/orders?page=${e}`;this.$http.get(t,this.tempProduct).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination})).catch((e=>{b().fire({position:"top-end",icon:"error",title:e.response.data.message,showConfirmButton:!1,timer:1500})}))},updatePaid(e){this.tempId=e.id,v.Z.emit("update-paid",e)},cancelId(){this.tempId=""},openModal(e,t){this.status=e,"edit"===e?(this.tempOrder=JSON.parse(JSON.stringify(t)),this.$refs.orderModal.openModal()):"delete"===e&&(this.tempOrder=JSON.parse(JSON.stringify(t)),this.$refs.delOrderModal.openModal())}},mounted(){this.getOrders()}};const Me=(0,xe.Z)(Pe,[["render",w]]);var De=Me},5604:function(e,t,r){e.exports=r.p+"img/icon-arrow-left.6f0ad973.svg"},6058:function(e,t,r){e.exports=r.p+"img/icon-arrow-right.624a1ec8.svg"}}]);
//# sourceMappingURL=921.9a5c3016.js.map