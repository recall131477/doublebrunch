"use strict";(self["webpackChunkdoublebrunch"]=self["webpackChunkdoublebrunch"]||[]).push([[584],{5679:function(t,e,s){function o(t){return{all:t=t||new Map,on:function(e,s){var o=t.get(e);o?o.push(s):t.set(e,[s])},off:function(e,s){var o=t.get(e);o&&(s?o.splice(o.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var o=t.get(e);o&&o.slice().map((function(t){t(s)})),(o=t.get("*"))&&o.slice().map((function(t){t(e,s)}))}}}s.d(e,{Z:function(){return r}});const a=o();var r=a},6294:function(t,e,s){var o=s(8262);e["Z"]=(0,o.Q_)("statusStore",{state:()=>({isLoading:!1}),actions:{changeLoading(){this.isLoading=!this.isLoading}}})},8729:function(t,e,s){s.d(e,{Z:function(){return u}});var o=s(6252),a=s(3577);const r=(0,o._)("div",{class:"loading__main"},[(0,o._)("div",{class:"loading__square absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[60px] h-[60px] bg-primary rounded -mt-2"}),(0,o._)("span",{class:"relative block text-24px text-secondary w-full h-full pt-2"},"午")],-1),i=[r];function l(t,e,s,r,l,p){return(0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["loading",{"is-active":s.isLoading}])},i,2)}var p={props:{isLoading:{type:Boolean,default:!1}}},n=s(3744);const c=(0,n.Z)(p,[["render",l]]);var u=c},9027:function(t,e,s){s.d(e,{Z:function(){return k}});var o=s(6252),a=s(3577),r=s(4768);const i={class:"border-primary border-b-2 p-[15px] md:p-5"},l={class:"flex justify-evenly items-center md:justify-center"},p=(0,o._)("span",{class:"block text-12px"},"Step.1",-1),n=(0,o._)("span",{class:"block text-14px md:text-16px"},"購物車",-1),c=[p,n],u=(0,o._)("span",{class:"block text-12px"},"Step.2",-1),d=(0,o._)("span",{class:"block text-14px md:text-16px"},"訂單資訊",-1),m=[u,d],x=(0,o._)("span",{class:"block text-12px"},"Step.3",-1),g=(0,o._)("span",{class:"block text-14px md:text-16px"},"確認訂單",-1),h=[x,g],y=(0,o._)("span",{class:"block text-12px"},"Step.4",-1),f=(0,o._)("span",{class:"block text-14px md:text-16px"},"完成訂單",-1),w=[y,f];function b(t,e,s,p,n,u){return(0,o.wg)(),(0,o.iD)("section",null,[(0,o._)("div",i,[(0,o._)("ul",l,[(0,o._)("li",null,[(0,o._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":s.step>="1"}])},c,2)]),(0,o._)("li",null,[(0,o._)("img",{src:r,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":s.step>="2"}])},null,2)]),(0,o._)("li",null,[(0,o._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":s.step>="2"}])},m,2)]),(0,o._)("li",null,[(0,o._)("img",{src:r,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":s.step>="3"}])},null,2)]),(0,o._)("li",null,[(0,o._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":s.step>="3"}])},h,2)]),(0,o._)("li",null,[(0,o._)("img",{src:r,alt:"icon-progress-arrow",class:(0,a.C_)(["opacity-50 md:mx-[30px]",{"!opacity-100":"4"===s.step}])},null,2)]),(0,o._)("li",null,[(0,o._)("div",{class:(0,a.C_)(["text-primary/50 text-center",{"!text-primary":"4"===s.step}])},w,2)])])])])}var v={props:{step:{type:String,default:""}}},_=s(3744);const C=(0,_.Z)(v,[["render",b]]);var k=C},7584:function(t,e,s){s.r(e),s.d(e,{default:function(){return bt}});var o=s(6252),a=s(3577),r=s(9963);const i={key:0,class:"text-center p-[15px] md:px-5 md:py-20"},l=(0,o._)("p",{class:"text-24px text-primary text-center mb-[15px] md:text-32px md:mb-5 lg:text-48px"}," 目前購物車沒有商品哦! ",-1),p=(0,o.Uk)("前往購物"),n={key:1},c=(0,o.uE)('<li class="hidden border-primary border-b-2 px-5 py-2.5 md:flex"><div class="w-2/6 lg:w-1/4"><span class="text-primary">商品資訊</span></div><div class="w-1/6 lg:w-1/4"><span class="text-primary">單件價格</span></div><div class="w-2/6 lg:w-1/4"><span class="text-primary">數量</span></div><div class="w-1/6 lg:w-1/4"><span class="text-primary">小計</span></div></li>',1),u={class:"w-full md:w-2/6 lg:w-1/4"},d={class:"flex items-center mb-2.5 md:mb-0"},m=["src","alt"],x={class:"text-primary"},g={class:"w-full md:w-1/6 lg:w-1/4"},h=(0,o._)("span",{class:"text-primary md:hidden"},"單件價格：",-1),y={class:"text-primary"},f={class:"w-full md:w-2/6 lg:w-1/4"},w={class:"relative flex border-primary border-2 my-2.5 md:w-[200px] md:my-0"},b=["disabled","onClick"],v=["onUpdate:modelValue","onChange"],_=["disabled","onClick"],C={key:0,class:"absolute top-[52px] right-0 text-14px text-warning md:top-11 md:left-0"},k={class:"w-full md:w-1/6 lg:w-1/4"},z=(0,o._)("span",{class:"text-primary md:hidden"},"小計：",-1),q={class:"text-primary"},Z=["onClick"],$=(0,o._)("span",{class:"block absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary -rotate-45 w-4 h-[2px]"},null,-1),D=(0,o._)("span",{class:"block absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary rotate-45 w-4 h-[2px]"},null,-1),M=[$,D],L={class:"flex flex-wrap border-primary border-b-2"},B={class:"w-full md:w-1/2"},S={class:"flex border-primary border-b-2 md:border-none"},I={class:"w-1/2"},j={class:"w-1/2"},P=(0,o._)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",class:"duration-[400ms] stroke-primary group-hover:stroke-white"},[(0,o._)("rect",{width:"16",height:"12",rx:"3",transform:"translate(2 6)",fill:"none","stroke-width":"2"}),(0,o._)("path",{d:"M13,9V5A4,4,0,0,0,5,5V9",transform:"translate(1 1)",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"})],-1),W=(0,o._)("span",{class:"ml-3"},"繼續購物",-1),E={class:"w-full md:w-1/2"},O={class:"flex"},U=["disabled"],V=["disabled"],A={class:"text-right pt-5 px-[15px] pb-2 md:p-5"},H={key:0,class:"text-24px text-primary mb-5"},Y=(0,o.Uk)("前往結帳");function K(t,e,s,$,D,K){const G=(0,o.up)("LoadingComponent"),Q=(0,o.up)("ProgressBar"),T=(0,o.up)("router-link"),F=(0,o.up)("CouponModal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(G,{isLoading:t.isLoading},null,8,["isLoading"]),(0,o.Wm)(Q,{step:"1"}),(0,o._)("section",null,[0===D.cart.carts.length?((0,o.wg)(),(0,o.iD)("div",i,[l,(0,o.Wm)(T,{to:{path:"/products",query:{category:"all",page:1}},class:"btn-pulse inline-block text-white bg-primary px-7 py-2 md:px-12 md:py-[18px]"},{default:(0,o.w5)((()=>[p])),_:1})])):((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("ul",null,[c,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.cart.carts,(e=>((0,o.wg)(),(0,o.iD)("li",{class:"relative flex flex-wrap items-center border-primary border-b-2 p-[15px] md:px-5 md:py-2.5",key:e.id},[(0,o._)("div",u,[(0,o._)("div",d,[(0,o._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"w-20 h-20 object-cover mr-5"},null,8,m),(0,o._)("span",x,(0,a.zw)(e.product.title),1)])]),(0,o._)("div",g,[h,(0,o._)("span",y,"$"+(0,a.zw)(t.$filters.currency(e.product.price)),1)]),(0,o._)("div",f,[(0,o._)("div",w,[(0,o._)("button",{type:"button",class:(0,a.C_)(["duration-300 relative w-10 h-10 group",{"cursor-not-allowed opacity-30":1===e.qty,"hover:bg-primary":e.qty>1}]),disabled:1===e.qty,onClick:t=>K.updateCartItem(e,"reduce")},[(0,o._)("span",{class:(0,a.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary w-3 h-[2px]",{"group-hover:bg-white":e.qty>1}])},null,2)],10,b),(0,o.wy)((0,o._)("input",{type:"text",class:"text-primary text-center bg-secondary border-primary border-x-2 flex-1 w-full",onkeyup:"value=value.replace(/[^\\d]/g,'').replace(/^0{1,}/g,'')","onUpdate:modelValue":t=>e.qty=t,onChange:t=>K.updateCartItem(e,e.qty)},null,40,v),[[r.nr,e.qty,void 0,{number:!0}]]),(0,o._)("button",{type:"button",class:(0,a.C_)(["duration-300 relative w-10 h-10 group",{"cursor-not-allowed opacity-30":30===e.qty,"hover:bg-primary":e.qty<30}]),disabled:30===e.qty,onClick:t=>K.updateCartItem(e,"add")},[(0,o._)("span",{class:(0,a.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-primary w-3 h-[2px]",{"group-hover:bg-white":e.qty<30}])},null,2),(0,o._)("span",{class:(0,a.C_)(["absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rotate-90 bg-primary w-3 h-[2px]",{"group-hover:bg-white":e.qty<30}])},null,2)],10,_),e.qty>30?((0,o.wg)(),(0,o.iD)("span",C,"商品數量不可超過30")):(0,o.kq)("",!0)])]),(0,o._)("div",k,[z,(0,o._)("span",q,"$"+(0,a.zw)(t.$filters.currency(e.total)),1)]),(0,o._)("button",{type:"button",class:"duration-300 absolute top-[15px] right-[15px] w-6 h-6 hover:rotate-90 md:top-1/2 md:right-5 md:-translate-y-1/2",onClick:t=>K.deleteCartItem(e.id)},M,8,Z)])))),128))]),(0,o._)("div",L,[(0,o._)("div",B,[(0,o._)("div",S,[(0,o._)("div",I,[(0,o._)("button",{type:"button",class:"btn duration-[400ms] flex justify-center items-center text-primary border-primary border-r-2 w-full h-[60px]",onClick:e[0]||(e[0]=(...t)=>K.deleteAllCarts&&K.deleteAllCarts(...t))}," 清空購物車 ")]),(0,o._)("div",j,[(0,o.Wm)(T,{to:{path:"/products",query:{category:"all",page:1}},class:"btn duration-[400ms] flex justify-center items-center text-primary border-primary border-r-2 h-[60px] group"},{default:(0,o.w5)((()=>[P,W])),_:1})])])]),(0,o._)("div",E,[(0,o._)("div",O,[(0,o.wy)((0,o._)("input",{type:"text",placeholder:"輸入優惠券代碼",class:"text-primary bg-secondary w-full h-[60px] flex-1 px-5",disabled:D.isCoupon,"onUpdate:modelValue":e[1]||(e[1]=t=>D.couponCode=t)},null,8,U),[[r.nr,D.couponCode]]),D.isCoupon?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"text-white bg-primary px-5",disabled:D.isCoupon}," 已套用優惠券 ",8,V)):((0,o.wg)(),(0,o.iD)("button",{key:1,type:"button",class:"btn-light text-white bg-primary h-[60px] px-5",onClick:e[2]||(e[2]=(...t)=>K.openCouponModal&&K.openCouponModal(...t))}," 領取優惠券 "))])])]),(0,o._)("div",A,[(0,o._)("p",{class:(0,a.C_)(["mb-2",{"text-20px text-primary/50 line-through":D.isCoupon,"text-24px text-primary":!D.isCoupon}])}," 總計金額 : $"+(0,a.zw)(t.$filters.currency(D.cart.total)),3),D.isCoupon?((0,o.wg)(),(0,o.iD)("p",H," 折扣後金額 : $"+(0,a.zw)(t.$filters.currency(Math.round(D.cart.final_total))),1)):(0,o.kq)("",!0),(0,o.Wm)(T,{to:"/checkout",class:"btn-light inline-block text-white bg-primary px-12 py-[18px]"},{default:(0,o.w5)((()=>[Y])),_:1})])])),(0,o.Wm)(F,{ref:"couponModal",onGetCoupon:K.useCoupon},null,8,["onGetCoupon"])])],64)}var G=s(6455),Q=s.n(G),T=s(5679),F=s(8262),J=s(6294),N=s(8729),R=s(9027);const X={class:"relative flex justify-center items-center w-full h-[calc(100%-30px)] max-w-[1000px] pointer-events-none px-[15px] mx-auto my-[15px] md:px-5"},tt={class:"flex flex-wrap flex-col-reverse bg-secondary w-full pointer-events-auto md:flex-row xl:h-[480px]"},et={class:"w-full md:w-1/2"},st={class:"flex flex-wrap self-start"},ot=["onClick"],at=["src"],rt={class:"w-full md:w-1/2"},it={class:"relative pt-[100%]"},lt=(0,o._)("img",{src:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648289491156.png",alt:"拼圖背景",class:"absolute top-0 left-0 w-full h-full object-cover"},null,-1),pt={class:"absolute top-0 left-0 w-full h-full object-cover"},nt={class:"flex flex-wrap"},ct=["onClick"],ut=["src"];function dt(t,e,s,r,i,l){return(0,o.wg)(),(0,o.iD)("div",{class:(0,a.C_)(["duration-300 fixed overflow-y-auto inset-[15px] z-[1000] md:inset-5",{"opacity-100 visible":i.isOpen,"opacity-0 invisible":!i.isOpen}])},[(0,o._)("div",{class:"fixed top-0 left-0 w-full h-full bg-primary bg-opacity-50",onClick:e[0]||(e[0]=(...t)=>l.closeModal&&l.closeModal(...t))}),(0,o._)("div",X,[(0,o._)("div",tt,[(0,o._)("div",et,[(0,o._)("div",st,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.puzzleStart,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:"w-1/3",key:t.url,onClick:s=>l.handPuzzle(t,e)},[(0,o._)("img",{src:t.url,alt:"拼圖塊"},null,8,at)],8,ot)))),128))])]),(0,o._)("div",rt,[(0,o._)("div",it,[lt,(0,o._)("div",pt,[(0,o._)("div",nt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.puzzleEnd,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{class:"w-1/3",key:t.url,onClick:s=>l.resetPuzzle(t,e)},[(0,o._)("img",{src:t.url,alt:"拼圖塊"},null,8,ut)],8,ct)))),128))])])])])])])],2)}var mt={watch:{puzzleEnd:{handler(t){this.winIdx=0,t.forEach(((t,e)=>{t.idx===e&&(this.winIdx+=1)}))},deep:!0},winIdx:{handler(t){9===t&&(this.isWin=!0,this.$emit("get-coupon"),this.isOpen=!1)}}},data(){return{puzzleStart:[{idx:0,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288428981.png"},{idx:1,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288455492.png"},{idx:2,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288465718.png"},{idx:3,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288479402.png"},{idx:4,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288910173.png"},{idx:5,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288923671.png"},{idx:6,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288515793.png"},{idx:7,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288524332.png"},{idx:8,url:"https://storage.googleapis.com/vue-course-api.appspot.com/rousong/1648288531291.png"}],puzzleEnd:[],winIdx:0,isWin:!1,isOpen:!1}},methods:{randomPuzzle(){this.puzzleStart.sort((()=>Math.random()>.5?-1:1))},handPuzzle(t,e){this.puzzleEnd.push(t),this.puzzleStart.splice(e,1)},resetPuzzle(t,e){this.puzzleStart.push(t),this.puzzleEnd.splice(e,1)},openModal(){this.isOpen=!0},closeModal(){this.isOpen=!1}},mounted(){this.randomPuzzle()}},xt=s(3744);const gt=(0,xt.Z)(mt,[["render",dt]]);var ht=gt;const yt=(0,J.Z)();var ft={components:{LoadingComponent:N.Z,ProgressBar:R.Z,CouponModal:ht},data(){return{cart:{carts:[]},couponCode:"",isCoupon:!1,status:""}},computed:{...(0,F.rn)(J.Z,["isLoading"])},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/rousong/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,this.cart.final_total!==this.cart.total?(this.isCoupon=!0,this.couponCode="double777"):this.isCoupon=!1})).catch((t=>{Q().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},updateCartItem(t,e){let s=t.qty;"reduce"===e?s-=1:"add"===e?s+=1:s=e,s>30&&(s=30);const o={product_id:t.product_id,qty:s},a=`https://vue3-course-api.hexschool.io/v2/api/rousong/cart/${t.id}`,r="已更新商品";this.$http.put(a,{data:o}).then((()=>{Q().fire({position:"top-end",icon:"success",title:r,showConfirmButton:!1,timer:1500}),T.Z.emit("update-cart"),this.getCart()})).catch((t=>{Q().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},deleteCartItem(t){const e=`https://vue3-course-api.hexschool.io/v2/api/rousong/cart/${t}`,s="已刪除商品";this.$http.delete(e).then((()=>{Q().fire({position:"top-end",icon:"success",title:s,showConfirmButton:!1,timer:1500}),T.Z.emit("get-cart"),T.Z.emit("update-cart"),this.getCart()})).catch((t=>{Q().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},deleteAllCarts(){const t="https://vue3-course-api.hexschool.io/v2/api/rousong/carts",e="已刪除全部商品";this.$http.delete(t).then((()=>{Q().fire({position:"top-end",icon:"success",title:e,showConfirmButton:!1,timer:1500}),T.Z.emit("get-cart"),T.Z.emit("update-cart"),this.getCart()})).catch((t=>{Q().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},useCoupon(){this.couponCode="double777";const t="https://vue3-course-api.hexschool.io/v2/api/rousong/coupon",e={code:this.couponCode};this.$http.post(t,{data:e}).then((t=>{t.data.success&&(this.cart.final_total=t.data.data.final_total,this.isCoupon=!0)})).catch((t=>{Q().fire({position:"top-end",icon:"error",title:t.response.data.message,showConfirmButton:!1,timer:1500})}))},openCouponModal(){this.$refs.couponModal.openModal()}},mounted(){yt.isLoading=!0,setTimeout((()=>{yt.isLoading=!1}),1e3),this.getCart(),T.Z.on("add-cart",(()=>{this.getCart()}))}};const wt=(0,xt.Z)(ft,[["render",K]]);var bt=wt},4768:function(t,e,s){t.exports=s.p+"img/icon-progress-arrow.8df09585.svg"}}]);
//# sourceMappingURL=584.771003b6.js.map